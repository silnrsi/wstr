---
// WsList component: show the languages and writing systems the exist for the given script.

import wsdata from '../data/script_ws.json';

import WsLocaleLink from './WsLocaleLink.astro';
import WsVarList from './WsVarList.astro';

const { script, wsMax = 10000 } = Astro.props;

const scriptObj = wsdata.find(s => s.ScriptCode === script);
const wsCount = scriptObj ? scriptObj.WrSys.length : 0;
const scriptTagLC = script.toLowerCase();
---

{wsCount == 0 && (<p>There are no known languages that use this script.</p>)}

{scriptObj && wsCount > 0 && (
	<div>
		<table>
		<thead>
			<tr>
				<th>Language</th>
				<th><a href='/topics/writingsystems/language-tagging'>Writing System<br/>Code</a></th>
				<th>Writing System<br/>Status</th>
				<th>SLDR/CLDR<br>locale</th>
				<th>Regional<br/>variants</th>
			</tr>
		</thead>
		<tbody>
		{scriptObj.WrSys.slice(0,wsMax).map((wsObj) => (
			<tr>
				<td>{wsObj.LangName}</td>
				<td><a id={wsObj.WsCode}></a>{wsObj.WsCode}</td>
				<td>{wsObj.Status}</td>
				<WsLocaleLink locale={wsObj.Locale} localeStatus={'LocaleStatus' in wsObj ? wsObj.LocaleStatus : {} } />
				<WsVarList script={script} ws={wsObj.WsCode} />
			</tr>
		))}
		{wsCount > wsMax && (
			<tr>
				<td colspan="5"><a href={`/scrlang/langlist/${scriptTagLC}-langs`}>See complete list</a></td>
			</tr>
		)}			
		</tbody>
		</table>
	</div>
)}

<style>
</style>

